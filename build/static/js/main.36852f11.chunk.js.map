{"version":3,"sources":["components/Filter.js","components/PersonForm.js","services/persons.js","components/Error.js","components/Persons.js","App.js","index.js"],"names":["Filter","value","onChange","placeholder","PersonForm","newName","newNumber","handleNameSubmit","handleNameChange","handleNumberChange","onSubmit","IconButton","type","baseUrl","personService","getAll","axios","get","then","response","data","create","person","post","update","id","put","remove","delete","Error","message","className","Persons","persons","useState","errorMessage","setErrorMessage","map","name","number","onClick","window","confirm","setTimeout","catch","error","Success","App","setPersons","setNewName","setNewNumber","filter","setFilter","successMessage","setSuccessMessage","useEffect","peopleList","formatPhoneNumber","phoneNumber","substring","filteredPersons","toLowerCase","includes","event","target","preventDefault","personObject","existingPerson","length","updatedExistingPerson","undefined","console","log","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.36852f11.chunk.js","sourcesContent":["const Filter = ({ value, onChange }) => {\n  return (\n    <div>\n      <h2>Filter by name: </h2>\n      Name: <input value={value} onChange={onChange} placeholder=\"John Doe\" />\n    </div>\n  );\n};\n\nexport default Filter;\n","import React from \"react\";\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport IconButton from \"@material-ui/core/IconButton\";\n\nconst PersonForm = ({\n  newName,\n  newNumber,\n  handleNameSubmit,\n  handleNameChange,\n  handleNumberChange,\n}) => {\n  return (\n    <form onSubmit={handleNameSubmit}>\n      <h2>Add a new contact:</h2>\n      <div>\n        Name:{\" \"}\n        <input\n          value={newName}\n          onChange={handleNameChange}\n          placeholder=\"John Doe\"\n        />\n      </div>\n      <div>\n        Number:{\" \"}\n        <input\n          value={newNumber}\n          onChange={handleNumberChange}\n          placeholder=\"1234567890\"\n        />\n      </div>\n      <div>\n        <IconButton type=\"submit\">\n          <AddCircleIcon />\n        </IconButton>\n      </div>\n    </form>\n  );\n};\n\nexport default PersonForm;\n","import axios from \"axios\";\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => axios.get(baseUrl).then((response) => response.data);\n\nconst create = (person) =>\n  axios.post(baseUrl, person).then((response) => response.data);\n\nconst update = (id, person) =>\n  axios.put(`${baseUrl}/${id}`, person).then((response) => response.data);\n\nconst remove = (id) =>\n  axios.delete(`${baseUrl}/${id}`).then((response) => response.data);\n\nconst personService = {\n  getAll,\n  create,\n  update,\n  remove,\n};\n\nexport default personService;\n","import React from 'react';\n\nconst Error = ({ message }) => {\n  if (message === null) {\n    return null;\n  }\n\n  return <div className=\"error\">{message}</div>;\n};\nexport default Error; ","import React, { useState } from \"react\";\nimport personService from \"../services/persons\";\nimport IconButton from '@material-ui/core/IconButton';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport \"../App.css\";\nimport Error from \"./Error\";\n\nconst Persons = ({ persons }) => {\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  return (\n    <div>\n      <h2>Phonebook:</h2>\n      <Error message={errorMessage} />\n      <ul>\n        {persons.map((person) => (\n          <li key={person.name}>\n            {person.name}: {person.number}{\" \"}\n            <IconButton\n              onClick={() => {\n                if (window.confirm(`Delete ${person.name} from the phonebook?`))\n                  //TODO, update state somehow\n                  personService\n                    .remove(person.id)\n                    .then(() => {\n                      setErrorMessage(\n                        `${person.name} has successfully been removed from the phonebook. Please refesh the page to see deletion.`\n                      );\n                      setTimeout(() => setErrorMessage(null), 5000);\n                    })\n                    .catch((error) => {\n                      setErrorMessage(\n                        `${person.name} has already been removed. Please refresh the page to see deletion.`\n                      );\n                      setTimeout(() => setErrorMessage(null), 5000);\n                    });\n              }}\n            >\n              <DeleteIcon/>\n            </IconButton>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default Persons;\n","import React, { useState, useEffect } from \"react\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport personService from \"./services/persons\";\nimport Error from \"./components/Error\";\nimport \"./App.css\";\n\nconst Success = ({ message }) => {\n  if (message === null) {\n    return null;\n  }\n\n  return <div className=\"success\">{message}</div>;\n};\n\n//@TODO update state on http delete in Persons.js\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filter, setFilter] = useState(\"\");\n  const [successMessage, setSuccessMessage] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  useEffect(() => {\n    personService.getAll().then((peopleList) => {\n      setPersons(peopleList);\n    });\n  }, []);\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleFilterChange = (event) => {\n    setFilter(event.target.value);\n  };\n\n  const formatPhoneNumber = (phoneNumber) => {\n    return (\n      \"(\" +\n      phoneNumber.substring(0, 3) +\n      \") \" +\n      phoneNumber.substring(3, 6) +\n      \"-\" +\n      phoneNumber.substring(6, 11)\n    );\n  };\n\n  const handleNameSubmit = (event) => {\n    event.preventDefault();\n    const personObject = {\n      name: newName,\n      number: formatPhoneNumber(newNumber),\n    };\n\n    const phoneBookContains = persons.filter(\n      (person) =>\n        newName.length != 0 &&\n        newName.includes(\" \") &&\n        person.name.toLowerCase().includes(newName.toLowerCase())\n    );\n    const existingPerson = phoneBookContains[0];\n\n    const updatedExistingPerson = {\n      ...existingPerson,\n      number: formatPhoneNumber(newNumber),\n    };\n    if (existingPerson !== undefined) {\n      if (\n        window.confirm(\n          `${existingPerson.name} is already in the phonebook. Replace their current phone number with a new one?`\n        )\n      ) {\n        if (newNumber.length == 10) {\n          personService\n            .update(existingPerson.id, updatedExistingPerson)\n            .then(\n              () => {\n                setPersons(\n                  setPersons.map((person) =>\n                    person.id !== existingPerson.id //create new array mapping non-matching ID's to original persons, if id matches, then map to our updatedExistingPerson\n                      ? person\n                      : updatedExistingPerson\n                  )\n                );\n              }, //@TODO, trigger rerender of people list on replacement\n              setSuccessMessage(\n                `${existingPerson.name}'s phone number has successfully been replaced.`\n              ),\n              setTimeout(() => {\n                setSuccessMessage(null);\n              }, 5000),\n              setNewNumber(\"\"),\n              setNewName(\"\")\n            )\n            .catch((error) => {\n              console.log(error);\n            });\n        } else {\n          setErrorMessage(\n            `Phone number must contain ${10 - newNumber.length} more digits.`\n          );\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 5000);\n        }\n      }\n    } else if (\n      newName.includes(\" \") &&\n      newName.length > 0 &&\n      newNumber.length == 10\n    ) {\n      personService.create(personObject).then(\n        setSuccessMessage(\n          `${personObject.name} has successfully been added to the phonebook.`\n        ),\n        setTimeout(() => {\n          setSuccessMessage(null);\n        }, 5000)\n      );\n      setPersons(persons.concat(personObject));\n      setNewName(\"\");\n      setNewNumber(\"\");\n    } else if (\n      !newName.includes(\" \") ||\n      newNumber.length < 10 ||\n      newNumber.length > 10\n    ) {\n      let errorMessage = \"\";\n      if (!newName.includes(\" \")) {\n        errorMessage += \"Name must contain a first and last name.\";\n      }\n      if (newNumber.length < 10 || newNumber.length > 10) {\n        errorMessage += ` Phone number must contain ${\n          10 - newNumber.length\n        } more digits.`;\n      }\n      setErrorMessage(errorMessage);\n      setTimeout(() => {\n        setErrorMessage(null);\n      }, 5000);\n    }\n  };\n\n  const filteredPersons = persons.filter((person) =>\n    person.name.toLowerCase().includes(filter.toLowerCase())\n  );\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Success message={successMessage} />\n      <Error message={errorMessage} />\n      <Filter value={filter} onChange={handleFilterChange} />\n      <PersonForm\n        newName={newName}\n        newNumber={newNumber}\n        handleNameSubmit={handleNameSubmit}\n        handleNumberChange={handleNumberChange}\n        handleNameChange={handleNameChange}\n      />\n      <Persons persons={filteredPersons} />\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from \"react-dom\";\nimport App from \"./App.js\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}