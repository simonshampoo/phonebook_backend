(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(16),a=t.n(c),o=t(6),r=t(3),u=t(2),s=t(0),i=function(e){var n=e.value,t=e.onChange;return Object(s.jsx)("input",{value:n,onChange:t})},l=function(e){var n=e.newName,t=e.newNumber,c=e.handleNameSubmit,a=e.handleNameChange,o=e.handleNumberChange;return Object(s.jsxs)("form",{onSubmit:c,children:[Object(s.jsx)("h2",{children:"add a new"}),Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{value:n,onChange:a})]}),Object(s.jsxs)("div",{children:["number: ",Object(s.jsx)("input",{value:t,onChange:o})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})},b=t(4),j=t.n(b),d="/api/persons",h={getAll:function(){return j.a.get(d).then((function(e){return e.data}))},create:function(e){return j.a.post(d,e).then((function(e){return e.data}))},update:function(e,n){return j.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data})).then(console.log("1. baseUrl/id: ","".concat(d,"/").concat(e)))},remove:function(e){return j.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))}},m=(t(15),function(e){var n=e.message;return null===n?null:Object(s.jsx)("div",{className:"error",children:n})}),f=function(e){var n=e.persons,t=Object(u.useState)(null),c=Object(r.a)(t,2),a=c[0],o=c[1];return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(m,{message:a}),Object(s.jsx)("ul",{children:n.map((function(e){return Object(s.jsxs)("li",{children:[e.name,": ",e.number," ",Object(s.jsx)("button",{onClick:function(){window.confirm("delete ".concat(e.name,"?"))&&h.remove(e.id).catch((function(n){o("".concat(e.name," was already removed. Please refresh the page.")),setTimeout((function(){return o(null)}),5e3)}))},children:"delete"})]},e.name)}))})]})},O=function(e){var n=e.message;return null===n?null:Object(s.jsx)("div",{className:"success",children:n})},v=function(){var e=Object(u.useState)([]),n=Object(r.a)(e,2),t=n[0],c=n[1],a=Object(u.useState)(""),b=Object(r.a)(a,2),j=b[0],d=b[1],m=Object(u.useState)(""),v=Object(r.a)(m,2),p=v[0],g=v[1],x=Object(u.useState)(""),w=Object(r.a)(x,2),C=w[0],N=w[1],S=Object(u.useState)(null),k=Object(r.a)(S,2),y=k[0],L=k[1];Object(u.useEffect)((function(){h.getAll().then((function(e){c(e)}))}),[]);var P=t.filter((function(e){return e.name.toLowerCase().includes(C.toLowerCase())}));return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(O,{message:y}),Object(s.jsx)(i,{value:C,onChange:function(e){N(e.target.value)}}),Object(s.jsx)(l,{newName:j,newNumber:p,handleNameSubmit:function(e){e.preventDefault();var n=t.filter((function(e){return e.name.toLowerCase().includes(j.toLowerCase())}))[0],a=Object(o.a)(Object(o.a)({},n),{},{number:p});if(n)window.confirm("".concat(n.name," is already in the phonebook. Replace this person?"))&&h.update(n.id,a).then((function(){c(c.map((function(e){return e.id!==n.id?e:a}))),g(""),d("")})).catch((function(e){console.log("2. ",e),console.log("3. existingPerson: ",n),console.log("4. updatedExistingPerson: ",a)}));else{var r={name:j,number:p};h.create(r).then(L("".concat(r.name," has been added to the phonebook")),setTimeout((function(){L(null)}),5e3)),c(t.concat(r)),d(""),g("")}},handleNumberChange:function(e){g(e.target.value)},handleNameChange:function(e){d(e.target.value)}}),Object(s.jsx)(f,{persons:P})]})};a.a.render(Object(s.jsx)(v,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.50f6be4e.chunk.js.map